<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apache Flink (incubating): Quickstart: Java API</title>
    <link rel="stylesheet" href="/incubator-flink-website/css/bootstrap.css">
    <link rel="stylesheet" href="/incubator-flink-website/css/bootstrap-lumen-custom.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>

<nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/incubator-flink-website/index.html">Apache Flink</a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quickstart <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/incubator-flink-website/docs/0.6-SNAPSHOT/setup_quickstart.html">Setup Flink</a></li>
            <li><a href="/incubator-flink-website/docs/0.6-SNAPSHOT/java_api_quickstart.html">Java API</a></li>
            <li><a href="/incubator-flink-website/docs/0.6-SNAPSHOT/scala_api_quickstart.html">Scala API</a></li>
          </ul>
        </li>

        <li>
          <a href="/incubator-flink-website/downloads.html" class="">Downloads</a>
        </li>

        <li>
          <a href="/incubator-flink-website/docs/0.5/faq.html" class="">FAQ</a>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/incubator-flink-website/docs/0.6-SNAPSHOT/">0.6-SNAPSHOT</a></li>
            <li><a href="/incubator-flink-website/docs/0.5/">0.5</a></li>
            <li><a href="http://stratosphere-javadocs.github.io/">0.6-SNAPSHOT Javadocs</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/incubator-flink-website/community.html#mailing-lists">Mailing Lists</a></li>
            <li><a href="/incubator-flink-website/community.html#issues">Issues</a></li>
            <li><a href="/incubator-flink-website/community.html#team">Team</a></li>
            <li class="divider"></li>
            <li><a href="/incubator-flink-website/how-to-contribute.html">How To Contribute</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/incubator-flink-website/asf.html">Apache Software Foundation</a></li>
            <!--<li><a href="/incubator-flink-website/project.html#history">History</a></li> -->
            <li><a href="https://wiki.apache.org/incubator/StratosphereProposal">Incubator Proposal (external)</a></li>
            <li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
            <li><a href="https://github.com/apache/incubator-flink">Source Code</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container">

<p>Start working on your Stratosphere Java program in a few simple steps.</p>

<h1 id="requirements">Requirements</h1>

<p>The only requirements are working <strong>Maven 3.0.4</strong> (or higher) and <strong>Java 6.x</strong> (or higher) installations.</p>

<h1 id="create-project">Create Project</h1>

<p>Use one of the following commands to <strong>create a project</strong>:</p>

<ul class="nav nav-tabs" style="border-bottom: none;">
    <li class="active"><a href="#quickstart-script" data-toggle="tab">Run the <strong>quickstart script</strong></a></li>
    <li><a href="#maven-archetype" data-toggle="tab">Use <strong>Maven archetypes</strong></a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="quickstart-script">
    
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>curl https://raw.githubusercontent.com/apache/incubator-flink/master/stratosphere-quickstart/quickstart.sh <span class="p">|</span> bash</code></pre></div>

    </div>
    <div class="tab-pane" id="maven-archetype">
    
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>mvn archetype:generate                             <span class="se">\</span>
      -DarchetypeGroupId<span class="o">=</span>eu.stratosphere               <span class="se">\</span>
      -DarchetypeArtifactId<span class="o">=</span>quickstart-java            <span class="se">\</span>
      -DarchetypeVersion<span class="o">=</span>0.5.1</code></pre></div>

        This allows you to <strong>name your newly created project</strong>. It will interactively ask you for the groupId, artifactId, and package name.
    </div>
</div>

<h1 id="inspect-project">Inspect Project</h1>

<p>There will be a new directory in your working directory. If you&#39;ve used the <em>curl</em> approach, the directory is called <code>quickstart</code>. Otherwise, it has the name of your artifactId.</p>

<p>The sample project is a <strong>Maven project</strong>, which contains two classes. <em>Job</em> is a basic skeleton program and <em>WordCountJob</em> a working example. Please note that the <em>main</em> method of both classes allow you to start Stratosphere in a development/testing mode.</p>

<p>We recommend to <strong>import this project into your IDE</strong> to develop and test it. If you use Eclipse, the <a href="http://www.eclipse.org/m2e/">m2e plugin</a> allows to <a href="http://books.sonatype.com/m2eclipse-book/reference/creating-sect-importing-projects.html#fig-creating-import">import Maven projects</a>. Some Eclipse bundles include that plugin by default, other require you to install it manually. The IntelliJ IDE also supports Maven projects out of the box.</p>

<p>A note to Mac OS X users: The default JVM heapsize for Java is too small for Stratosphere. You have to manually increase it. Choose &quot;Run Configurations&quot; -&gt; Arguments and write into the &quot;VM Arguments&quot; box: &quot;-Xmx800m&quot; in Eclipse.</p>

<h1 id="build-project">Build Project</h1>

<p>If you want to <strong>build your project</strong>, go to your project directory and issue the <code>mvn clean package</code> command. You will <strong>find a jar</strong> that runs on every Stratosphere cluster in <code>target/stratosphere-project-0.1-SNAPSHOT.jar</code>.</p>

<h1 id="next-steps">Next Steps</h1>

<p>Write your application!</p>

<p>The quickstart project contains a WordCount implementation, the &quot;Hello World&quot; of Big Data processing systems. The goal of WordCount is to determine the frequencies of words in a text, e.g., how often do the terms &quot;the&quot; or &quot;house&quot; occurs in all Wikipedia texts.</p>

<p><strong>Sample Input</strong>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">big data is big
</code></pre></div>
<p><strong>Sample Output</strong>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">big 2
data 1
is 1
</code></pre></div>
<p>The following code shows the WordCount implementation from the Quickstart which processes some text lines with two operators (FlatMap and Reduce), and writes the prints the resulting words and counts to std-out.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordCount</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

    <span class="c1">// set up the execution environment</span>
    <span class="kd">final</span> <span class="n">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

    <span class="c1">// get input data</span>
    <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">fromElements</span><span class="o">(</span>
        <span class="s">&quot;To be, or not to be,--that is the question:--&quot;</span><span class="o">,</span>
        <span class="s">&quot;Whether &#39;tis nobler in the mind to suffer&quot;</span><span class="o">,</span>
        <span class="s">&quot;The slings and arrows of outrageous fortune&quot;</span><span class="o">,</span>
        <span class="s">&quot;Or to take arms against a sea of troubles,&quot;</span>
        <span class="o">);</span>

    <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">counts</span> <span class="o">=</span> 
        <span class="c1">// split up the lines in pairs (2-tuples) containing: (word,1)</span>
        <span class="n">text</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="k">new</span> <span class="nf">LineSplitter</span><span class="o">())</span>
        <span class="c1">// group by the tuple field &quot;0&quot; and sum up tuple field &quot;1&quot;</span>
        <span class="o">.</span><span class="na">groupBy</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
        <span class="o">.</span><span class="na">aggregate</span><span class="o">(</span><span class="n">Aggregations</span><span class="o">.</span><span class="na">SUM</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

    <span class="c1">// emit result</span>
    <span class="n">counts</span><span class="o">.</span><span class="na">print</span><span class="o">();</span>

    <span class="c1">// execute program</span>
    <span class="n">env</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;WordCount Example&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The operations are defined by specialized classes, here the LineSplitter class.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LineSplitter</span> <span class="kd">extends</span> <span class="n">FlatMapFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">flatMap</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">,</span> <span class="n">Collector</span><span class="o">&lt;</span><span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// normalize and split the line into words</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\W+&quot;</span><span class="o">);</span>

    <span class="c1">// emit the pairs</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">token</span> <span class="o">:</span> <span class="n">tokens</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">out</span><span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="k">new</span> <span class="n">Tuple2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;(</span><span class="n">token</span><span class="o">,</span> <span class="mi">1</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p><a href=https://github.com/apache/incubator-flink/blob/master//stratosphere-examples/stratosphere-java-examples/src/main/java/eu/stratosphere/example/java/wordcount/WordCount.java>Check GitHub</a> for the full example code.</p>

<p>For a complete overview over our Java API, have a look at the <a href="java_api_guide.html">API Documentation</a> and <a href="java_api_examples.html">further example programs</a>. If you have any trouble, ask on our <a href="http://mail-archives.apache.org/mod_mbox/incubator-flink-dev/">Mailing List</a>. We are happy to provide help.</p>


     <div class="footer">

<hr class="divider">

<p><small>Apache Flink is an effort undergoing incubation at The Apache Software
Foundation (ASF), sponsored by the Apache Incubator PMC. Incubation is
required of all newly accepted projects until a further review indicates that
the infrastructure, communications, and decision making process have
stabilized in a manner consistent with other successful ASF projects. While
incubation status is not necessarily a reflection of the completeness or
stability of the code, it does indicate that the project has yet to be fully
endorsed by the ASF.</small></p>

<p><a href="http://incubator.apache.org/"><img src="/incubator-flink-website/img/apache-incubator-logo.png" alt="Incubator Logo"></a></p>

<p class="text-center"><a href="/incubator-flink-website/privacy-policy.html">Privacy Policy<a></p>

      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="/incubator-flink-website/js/bootstrap.min.js"></script>
  </body>
</html>
